{% extends "base.html" %}
{% load static %}
{% block title %}Home{% endblock %}
{% block style %}
    <link rel="stylesheet" href="{% static 'css/fullcalendar.min.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

{% endblock %}
{% block content %}

{% now "H" as current_hour %}
{% if current_hour >= 4 < 12 %}
    <h1 class="card-title"><b>Good Morning, {{ user.username }}!</b></h1>
{% elif current_hour < 18 %}
    <h1 class="card-title"><b>Good Afternoon, {{ user.username }}!</b></h1>
{% else %}
    <h1 class="card-title"><b>Good Evening, {{ user.username }}!</b></h1>
{% endif %}

<style>
    .card-body h4 {
        margin-bottom: 15px;
        color: #141770;
    }

    .card-body p.card-text {
        margin-bottom: 1px;
    }

    #calendar {
        width: auto;
        height: auto; /* Auto height based on content */
    }

    #liveTime {
        font-size: 20px;
        margin-top: 10px;
    }
</style>

<div class="row">
    <div class="col-md-6">
        <div class="card mt-3 rounded-top rounded-2">
            <div class="card-body">
                <h4>Account Overview</h4>
                <p class="card-text">Account ID: {{ user.acc_id }}</p>
                <p class="card-text">Account Position Type: <b>{{ user.acc_type.acc_type_name }}</b></p>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card mt-3 rounded-top rounded-2">
            <div class="card-body">
                <h4>Account Log</h4>
                <p class="card-text">Account Created: {{ user.acc_created_at }}</p>
                <p class="card-text">Last Login: {{ user.last_login }}</p>
            </div>
        </div>
    </div>

    <!-- Updated Cards -->
    <div class="col-md-6">
        <div class="card mt-3 rounded-top rounded-2">
            <div class="card-body">
                <h4>Today</h4>
                
                <div id="calendar"></div>
                <p id="liveTime"></p>
            </div>
        </div>
    </div>

    <!-- Add this in the head of your HTML file to include Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

<!-- ... your existing HTML code ... -->

    <div class="col-md-6">
        <div class="card mt-3 rounded-top rounded-2">
            <div class="card-body">
                <h4>Shortcuts</h4>
                    <div class="mb-2 d-flex float-start">
                        <a href="{% url 'Add Product' %}" class="btn btn-lg btn-primary btn-dark me-2 mb-2" style="background-color: #141770;">Add Product</a>
                        <a href="{% url 'Add Account' %}" class="btn btn-lg btn-primary btn-dark me-2 mb-2" style="background-color: #141770;">Add Account</a>
                        <a href="{% url 'Add Inventory' %}" class="btn btn-lg btn-primary btn-dark me-2 mb-2" style="background-color: #141770;">Add Inventory</a>
                        <a href="{% url 'Create Invoice' %}" class="btn btn-lg btn-primary btn-dark me-2 mb-2" style="background-color: #141770;">Create Invoice</a>
                        <a href="{% url 'Orders' %}" class="btn btn-lg btn-primary btn-dark me-2 mb-2" style="background-color: #141770;">Create PO</a>
                    </div>
            </div>
        </div>
    </div>
</div>

       
    
</div>

{% endblock %}
{% block script %}
<script src="{% static 'js/moment.min.js' %}"></script>
<script src="{% static 'js/fullcalendar.min.js' %}"></script>
<script>
    function updateLiveTime() {
        var currentTime = new Date();
        var hours = currentTime.getHours();
        var minutes = currentTime.getMinutes();
        var ampm = hours >= 12 ? 'PM' : 'AM';

        hours = hours % 12 || 12;

        minutes = minutes < 10 ? '0' + minutes : minutes;

        document.getElementById('liveTime').innerHTML = hours + ':' + minutes + ' ' + ampm;
    }

    setInterval(updateLiveTime, 1000);
    updateLiveTime();

    $('#calendar').fullCalendar({
        contentHeight: 'auto'
    });
</script>
{% endblock %}